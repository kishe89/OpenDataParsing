{"version":3,"sources":["../../init/Initializer.js"],"names":["exports","InitMongoDB","env","mongoose","VCAP_SERVICES","credentials","require","options","connectTimeoutMS","keepAlive","ha","autoReconnect","reconnectTries","db","connect","MongodbURI","then","console","log","catch","err","error","service","JSON","parse","mLabmongodb","mongodb","connection_string","uri","e"],"mappings":";;AAAA;;;;;;AAMAA,QAAQC,WAAR,GAAsB,UAAUC,GAAV,EAAcC,QAAd,EAAwB;;AAE1C,QAAG,CAACD,IAAIE,aAAR,EAAsB;AAClB;;;;AAIA,YAAIC,cAAcC,QAAQ,cAAR,CAAlB;AACA,YAAMC,UAAU;AACZC,8BAAkB,IADN;AAEZC,uBAAU,IAFE;AAGZC,gBAAG,IAHS;AAIZC,2BAAc,IAJF;AAKZC,4BAAe;AALH,SAAhB;AAOA,YAAIC,KAAKV,SAASW,OAAT,CAAiBT,YAAYU,UAA7B,EAAwCR,OAAxC,CAAT;AACAM,WAAGG,IAAH,CAAQ,YAAY;AAChBC,oBAAQC,GAAR,CAAY,oBAAZ;AACH,SAFD,EAEGC,KAFH,CAES,UAAUC,GAAV,EAAe;AACpBH,oBAAQI,KAAR,CAAcD,GAAd;AACH,SAJD;AAKH,KAnBD,MAmBK;AACD;;;AAGA,YAAIE,UAAUC,KAAKC,KAAL,CAAWtB,IAAIuB,WAAf,CAAd;AACA,YAAIC,UAAUJ,QAAQ,cAAR,CAAd;AACA,YAAIK,oBAAoBD,QAAQ,CAAR,EAAWrB,WAAX,CAAuBuB,GAA/C;;AAEA;AACA,YAAMrB,WAAU;AACZC,8BAAkB,IADN;AAEZC,uBAAU,IAFE;AAGZC,gBAAG,IAHS;AAIZC,2BAAc,IAJF;AAKZC,4BAAe;AALH,SAAhB;AAOA,YAAIC,MAAKV,SAASW,OAAT,CAAiBa,iBAAjB,EAAmCpB,QAAnC,CAAT;AACAM,YAAGG,IAAH,CAAQ,YAAY;AAChBC,oBAAQC,GAAR,CAAY,oBAAZ;AACH,SAFD,EAEGC,KAFH,CAES,UAAUU,CAAV,EAAa;AAClBZ,oBAAQC,GAAR,CAAYW,CAAZ;AACH,SAJD;AAMH;AACJ,CA7CD","file":"Initializer.js","sourcesContent":["/**\n * CreatedAt 2017-11-16 14:07:00 kst\n * by kim ji woon\n *\n */\n\nexports.InitMongoDB = function (env,mongoose) {\n\n    if(!env.VCAP_SERVICES){\n        /**\n         * @TODO Local Initialization\n         * Please Input ./credentials/credential.js\n         */\n        let credentials = require('./credential');\n        const options = {\n            connectTimeoutMS: 4000,\n            keepAlive:true,\n            ha:true,\n            autoReconnect:true,\n            reconnectTries:30\n        };\n        let db = mongoose.connect(credentials.MongodbURI,options);\n        db.then(function () {\n            console.log('connection success');\n        }).catch(function (err) {\n            console.error(err);\n        });\n    }else{\n        /**\n         * @TODO Production Environment Initialization\n         */\n        let service = JSON.parse(env.mLabmongodb);\n        let mongodb = service['mLab-mongodb'];\n        let connection_string = mongodb[0].credentials.uri;\n\n        //mLab mongodb option\n        const options = {\n            connectTimeoutMS: 4000,\n            keepAlive:true,\n            ha:true,\n            autoReconnect:true,\n            reconnectTries:30\n        };\n        let db = mongoose.connect(connection_string,options);\n        db.then(function () {\n            console.log('connection success');\n        }).catch(function (e) {\n            console.log(e);\n        });\n\n    }\n};"]}